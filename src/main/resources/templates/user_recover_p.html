<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Register</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="../../css/style_login.css">
  <link rel="stylesheet" href="../../plugins/elementui/index.css">
  <link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="../../css/style.css">

</head>
<body>
<section class="ftco-section">
  <div id="app">
    <div class="container">
      <!--    <div class="row justify-content-center">-->
      <!--      <div class="col-md-6 text-center mb-5">-->
      <!--        <h2 class="heading-section">欢迎登录机票管理系统</h2>-->
      <!--      </div>-->
      <!--    </div>-->
      <div class="row justify-content-center">
        <div class="col-md-7 col-lg-5">
          <div class="wrap">
            <div class="img" style="background-image: url('../../images/bg-2.jpg');"></div>
            <div class="login-wrap p-4 p-md-5">
              <div class="d-flex">
                <div class="w-100">
                  <h3 class="mb-4">输入新的密码</h3>
                </div>
              </div>
              <form id="registerForm" action="setNewPass" method="post" class="signin-form">
                <div class="form-group mt-3">
                  <input placeholder="新密码" type="password" name="password" id="password-field" class="form-control"
                         required>
                </div>
                <div class="form-group">
                  <input placeholder="再次输入密码" type="password" id="repassword-field" class="form-control"
                         required onkeyup="checkPass()"><span id="prompt">
              </span></input>
                </div>
                <div class="form-group mt-3">
                  <input style="display: inline; width: 140px" placeholder="请输入验证码" name="code" type="text"
                         class="form-control" required>
                  <a href="#" onclick="refresh_auth_img()">
                    <img id="auth-img" style="display: inline" th:src="@{/getImage}" alt="">
                  </a>
                </div>
                <div class="form-group">
                  <input id="submit" type="submit" value="确认" class="form-control btn btn-primary rounded submit px-3">
                </div>
                <div style="justify-content: center;" class="form-group d-md-flex">
                  <h3 class="text-center" th:text="${msg}" style="color: #d52738"></h3>
                </div>
              </form>
              <p class="text-center">
                <a href="/toLogin">点我登录</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="../../js/jquery.min.js"></script>
<script src="../../js/popper.js"></script>
<script src="../../js/bootstrap.min.js"></script>
<script src="../../js/main.js"></script>
<script src="../../js/vue.js"></script>
<script src="../../plugins/elementui/index.js"></script>
<script src="../../js/axios-0.18.0.js"></script>
<script>
  function refresh_auth_img() {
    let img = document.getElementById("auth-img");
    img.src = "/getImage?" + Math.random();
  }
</script>
<script>
  function checkPass() {
    let p = document.getElementById("password-field").value;
    let rp = document.getElementById("repassword-field").value;

    if (p === rp) {
      document.getElementById("prompt").innerHTML = "<br><p style='color: green\'>两次密码输入一致</p>";
      document.getElementById("submit").disabled = false;
    } else {
      document.getElementById("prompt").innerHTML = "<br><p style='color: red\'>两次密码输入不一致</p>";
      document.getElementById("submit").disabled = true;
    }
  }
</script>

<!--<script>-->

<!--  let vue = new Vue({-->
<!--    el: '#app',-->
<!--    data: {-->
<!--      // new password form-->
<!--      formData: {}-->
<!--    },-->

<!--    created() {-->

<!--    },-->

<!--    methods: {-->
<!--      updatePass(){-->
<!--        axios.put("/users", this.formData).then((res)=>{-->
<!--          if (res.data.flag) {-->
<!--            this.$message.success("修改成功");-->
<!--          } else {-->
<!--            this.$message.error("修改失败");-->
<!--          }-->
<!--        })-->
<!--      }-->
<!--    }-->
<!--  })-->
<!--</script>-->

</body>
</html>

